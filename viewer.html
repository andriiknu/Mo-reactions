<!doctype html><meta charset="utf-8">
<title>Cross-section viewer</title>
<h2 style="font-family:system-ui;margin:16px 24px;">Interactive Cross-Sections</h2>
<div id="chart" style="height:620px;width:95%;margin:0 auto;"></div>
<pre id="meta" style="white-space:pre-wrap;font:12px system-ui;margin:16px 24px;background:#fafafa;border:1px solid #eee;padding:10px;border-radius:8px"></pre>

<script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
<script src="lib/parser.js"></script>
<script>
(function(){
  const embedded = document.getElementById('x4json');
  if (embedded) {
    try { window.__renderX4(JSON.parse(embedded.textContent)); }
    catch(e){ document.getElementById('meta').textContent = 'Invalid embedded JSON: '+e.message; }
    return;
  }
  const params = new URLSearchParams(location.search);
  const id = params.get('id');
  if (!id) { document.getElementById('meta').textContent = 'Add ?id=ga69_pn to URL (expects /data/ga69_pn.json)'; return; }
  const url = `data/${encodeURIComponent(id)}.json`;
  fetch(url)
    .then(r => r.json())
    .then(x4 => { window.__renderX4(x4); })
    .catch(err => { document.getElementById('meta').textContent = 'Failed to load '+url+': '+err; });
})();
</script>
